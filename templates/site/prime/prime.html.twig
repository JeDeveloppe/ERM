{% extends "site/components/_base.html.twig" %}

{% block title %}{{ title }}{% endblock %}

{% block body %}

	<div class="row g-0 justify-content-center align-items-center">
		<h1 class="col-12 text-center my-5">{{ title }}</h1>
		<div class="col-12 col-md-10 col-lg-8 d-flex justify-content-center align-items-center mb-5">
			{{ form_start(form) }}
				<div class="my-custom-class-for-errors">
					{{ form_errors(form) }}
				</div>
				<div class="row justify-content-around">
					<div class="col-11 form-group mb-3">
						<label for="exampleFormControlInput1">{{ form_label(form.fullPs) }}</label>
						{{ form_widget(form.fullPs) }}
						{{ form_errors(form.fullPs) }}
					</div>
					<div class="col-11 form-group mb-3">
						<label for="exampleFormControlInput1">{{ form_label(form.divider) }}</label>
						{{ form_widget(form.divider) }}
						{{ form_errors(form.divider) }}
					</div>
					<div class="col-11 d-flex justify-content-center align-items-center mb-3">
						<button type="submit" class="btn btn-primary">Calculer</button>
					</div>
				</div>
			{{ form_end(form) }}
		</div>
		{% if result is not null %}
			<div class="col-12 col-md-10 col-lg-8 d-flex flex-wrap justify-content-center align-items-center mb-5 p-5 shadow-lg">
				<p class="col-12 fw-bold text-warning">Prime par personne: {{ result|number_format(2, '.', ',') }} €</p>
				<table class="table table-striped">
					<tr>
						<td colspan="2">Prochain palier:</td>
					</tr>
					<tr>
						<td>PS TOTALE:</td>
						<td>{{ infosForNextLevel.nextPsForNextLevel }}</td>
					</tr>
					<tr>
						<td>Reste à faire:</td>
						<td>{{ infosForNextLevel.psDifference }}</td>
					</tr>
					<tr>
						<td>Prime par personne:</td>
						<td>Mini: {{ infosForNextLevel.startPrime|number_format(2, '.', ',') }} € - Max: {{ infosForNextLevel.endPrime|number_format(2, '.', ',') }} €</td>
					</tr>
				</table>
			</div>

			
		{% endif %}
		<div class="col-12 col-md-10 col-lg-8 d-flex justify-content-center align-items-center mb-5">
			<table class="col-11 table text-center mb-5">
				<thead>
					<tr>
					<th scope="col">De</th>
					<th scope="col">à</th>
					<th scope="col">Pourcentage</th>
					</tr>
				</thead>
				<tbody>
					{% for primeLevel in primeLevels %}
						<tr>
							<td>{{ primeLevel.start }}</td>
							<td>{{ primeLevel.end }}</td>
							<td>{{ primeLevel.percentage / 100 }}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>

	</div>


{% endblock %}
