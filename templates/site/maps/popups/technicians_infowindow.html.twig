<div class="p-2">
    <div class="d-flex align-items-center mb-2">
        <i class="fas fa-store fa-2x text-primary me-2"></i>
        <div>
            <h6 class="mb-0 fw-bold">{{ shop.name }} ({{ shop.cm }})</h6>
            <small class="text-muted">{{ shop.phone }}</small>
        </div>
    </div>
    
    <ul class="list-unstyled mb-0">
        <li class="d-flex align-items-center mb-1">
            <i class="fas fa-route me-2 text-success"></i>
            Distance : <span class="fw-bold ms-1">{{ (data.distance / 1000) | round(1) }} KMS</span>
        </li>
        <li class="d-flex align-items-center mb-1">
            <i class="fas fa-clock me-2 text-info"></i>
            Temps : 
            {% set dureeEnSecondes = data.duration %}
            {% set hours = (dureeEnSecondes / 3600) | round(0, 'floor') %}
            {% set minutes = (dureeEnSecondes / 60) % 60 | round(0, 'floor') %}
            <span class="fw-bold ms-1">
                {% if hours > 0 %}
                    {{ hours }} H
                {% endif %}
                {{ minutes }} min
            </span>
        </li>
    </ul>

    {% if option == 'telematique' %}
        <hr>
        <h6 class="fw-bold mb-1"><i class="fas fa-tools me-2 text-primary"></i> Techniciens</h6>
        {% for technician in shop.technicians %}
            <div class="my-2">
                <p class="mb-0 fw-bold">{{ technician.nameAndFirstName() }}</p>
                <i class="fas fa-phone me-1 text-success"></i><a href="tel:{{ technician.phone|replace({' ': ''}) }}">{{ technician.phone }}</a>
                <div class="d-flex flex-wrap gap-1 mt-1">
                    {% for formation in technician.technicianFormations %}
                        <span class="badge rounded-pill text-bg-primary">{{ formation.name }}</span>
                    {% endfor %}
                    {% for function in technician.fonctions %}
                        <span class="badge rounded-pill text-bg-secondary">{{ function.name }}</span>
                    {% endfor %}
                </div>
            </div>
        {% else %}
            <p class="text-muted fst-italic">Aucun technicien</p>
        {% endfor %}
    {% endif %}

    <hr>
    
    <h6 class="fw-bold mb-1"><i class="fas fa-handshake me-2 text-warning"></i> CGO(s)</h6>
    {% if shop.cgos is not empty %}
        <ul class="list-unstyled">
            {% for cgo in shop.cgos %}
                <li class="mb-0">{{ cgo.name }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted fst-italic">Aucun cgo rattaché</p>
    {% endif %}

    <hr>
    <a href="https://www.google.com/maps/dir/?api=1&origin={{ cityOfIntervention.latitude }},{{ cityOfIntervention.longitude }}&destination={{ shop.city.latitude }},{{ shop.city.longitude }}" target="_blank" class="btn btn-primary btn-sm w-100">
        <i class="fas fa-directions me-1"></i> Itinéraire
    </a>
</div>